<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Bristol Development Group - Site Intelligence Platform</title>
    <meta name="description" content="Enterprise-grade AI-powered site intelligence platform for Bristol Development Group with sophisticated chat interface, comprehensive real estate analytics, and advanced data integration capabilities." />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://bristol-intelligence.com/" />
    <meta property="og:title" content="Bristol Development Group - Site Intelligence Platform" />
    <meta property="og:description" content="Advanced AI-powered analysis for multifamily development opportunities across Sunbelt markets. Comprehensive site feasibility, market analytics, and development insights." />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://bristol-intelligence.com/" />
    <meta property="twitter:title" content="Bristol Development Group - Site Intelligence Platform" />
    <meta property="twitter:description" content="Advanced AI-powered analysis for multifamily development opportunities across Sunbelt markets." />
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzhCMTUzOCIvPgo8dGV4dCB4PSIxNiIgeT0iMjIiIGZvbnQtZmFtaWx5PSJDaW56ZWwiIGZvbnQtc2l6ZT0iMjAiIGZvbnQtd2VpZ2h0PSI3MDAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5CPC90ZXh0Pgo8L3N2Zz4K" />
    
  </head>
  <body>
    <div id="root"></div>
    
    <!-- ElevenLabs ConvAI Widget Script - Original CDN -->
    <script src="https://unpkg.com/@elevenlabs/convai-widget-embed" async type="text/javascript"></script>
    
    <!-- ElevenLabs ConvAI Widget with Manual Styling -->
    <elevenlabs-convai 
      agent-id="agent_8801k2t62y9qehhsqqdmzmp10kt9"
      style="position: fixed !important; bottom: 20px !important; right: 20px !important; z-index: 9999 !important; display: block !important; visibility: visible !important; opacity: 1 !important; min-width: 60px !important; min-height: 60px !important;">
    </elevenlabs-convai>
    
    <!-- Fallback Test Widget -->
    <div id="fallback-widget" style="position: fixed; bottom: 20px; right: 20px; z-index: 9998; width: 60px; height: 60px; background: #8B1538; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; cursor: pointer; font-weight: bold;">
      EL
    </div>
    
    <!-- Enhanced Debug and Troubleshooting -->
    <script>
      console.log('=== ElevenLabs Widget Debug v2 ===');
      
      // Check script loading
      let scriptLoaded = false;
      let widgetRegistered = false;
      
      // Monitor script loading
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM ready, checking script load...');
        
        // Check if script loaded
        const scripts = document.querySelectorAll('script[src*="convai-widget-embed"]');
        console.log('Widget scripts found:', scripts.length);
        
        // Wait and check custom element registration
        setTimeout(function() {
          const customElementDefined = customElements.get('elevenlabs-convai');
          console.log('Custom element registered:', !!customElementDefined);
          
          const widget = document.querySelector('elevenlabs-convai');
          const fallback = document.querySelector('#fallback-widget');
          
          console.log('Widget element found:', !!widget);
          console.log('Fallback element found:', !!fallback);
          
          if (widget) {
            console.log('Widget innerHTML:', widget.innerHTML);
            console.log('Widget shadow DOM:', widget.shadowRoot);
            console.log('Widget styles:', window.getComputedStyle(widget));
            
            // Try to manually trigger widget initialization
            if (widget.connectedCallback && typeof widget.connectedCallback === 'function') {
              console.log('Manually calling connectedCallback');
              widget.connectedCallback();
            }
          }
          
          // Hide fallback if ElevenLabs widget is working
          if (widget && widget.shadowRoot && fallback) {
            fallback.style.display = 'none';
            console.log('ElevenLabs widget appears to be working, hiding fallback');
          } else if (fallback) {
            console.log('ElevenLabs widget not working, showing fallback');
            fallback.onclick = function() {
              alert('ElevenLabs widget failed to load. Please check:\n1. Agent is public with auth disabled\n2. Domain is whitelisted\n3. Network connectivity');
            };
          }
        }, 3000);
      });
      
      // Monitor any errors
      window.addEventListener('error', function(e) {
        if (e.message && e.message.toLowerCase().includes('elevenlabs')) {
          console.error('ElevenLabs error:', e);
        }
      });
      
      // Check for network failures
      window.addEventListener('load', function() {
        fetch('https://unpkg.com/@elevenlabs/convai-widget-embed')
          .then(response => {
            console.log('ElevenLabs script fetch status:', response.status);
            return response.text();
          })
          .then(text => {
            console.log('ElevenLabs script loaded successfully, size:', text.length);
          })
          .catch(error => {
            console.error('Failed to fetch ElevenLabs script:', error);
          });
      });
    </script>
    
    <script type="module" src="/src/main.tsx"></script>
    <!-- Replit dev banner temporarily disabled due to map loading conflicts -->
    <!-- <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script> -->
  </body>
</html>
